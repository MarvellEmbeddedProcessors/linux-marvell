/****************************************************************************
* This program is free software: you can redistribute it and/or modify it
* under the terms of the GNU General Public License as published by the Free
* Software Foundation, either version 2 of the License, or any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program.  If not, see <http://www.gnu.org/licenses/>.
* ***************************************************************************
*/

/*
 * Device Tree file for Marvell Armada CPN-110 Master.
 */

/ {
	cpn-110-slave {
		#address-cells = <2>;
		#size-cells = <2>;
		compatible = "simple-bus";
		interrupt-parent = <&icu_s>;
		ranges;

		config-space {
			#address-cells = <1>;
			#size-cells = <1>;
			compatible = "simple-bus";
			ranges =<0x0 0x0 0xf4000000 0x2000000>;

			#include "armada-cp110-1.dtsi"
		};

		/* PCIe ports have unique addressing so they do not
		 * come from the common CP110 dtsi
		 */
		pcie@0x600000 {
			compatible = "marvell,armada8k-pcie", "snps,dw-pcie";
			reg = <0 0xf4600000 0 0x10000>, <0 0xfaf00000 0 0x80000>;	/* Last 512KB of mem space */
			reg-names = "ctrl", "config";
			#address-cells = <3>;
			#size-cells = <2>;
			#interrupt-cells = <1>;
			device_type = "pci";
			dma-coherent;

			bus-range = <0 0xff>;
			ranges = <0x81000000 0 0xfd000000 0  0xfd000000 0 0x10000	/* downstream I/O */
				  0x82000000 0 0xfa000000 0  0xfa000000 0 0xf00000>;	/* non-prefetchable memory */
			interrupt-map-mask = <0 0 0 0>;
			interrupt-map = <0 0 0 0 &icu_s ICU_GRP_NSR 22 IRQ_TYPE_LEVEL_HIGH>;
			interrupts = <ICU_GRP_NSR 22 IRQ_TYPE_LEVEL_HIGH>;
			num-lanes = <1>;
			clocks = <&cps_syscon0 1 13>;
			status = "disabled";
		};

		pcie@0x620000 {
			compatible = "marvell,armada8k-pcie", "snps,dw-pcie";
			reg = <0 0xf4620000 0 0x10000>, <0 0xfbf00000 0 0x80000>;	/* Last 512KB of mem space */
			reg-names = "ctrl", "config";
			#address-cells = <3>;
			#size-cells = <2>;
			#interrupt-cells = <1>;
			device_type = "pci";
			dma-coherent;

			bus-range = <0 0xff>;
			ranges = <0x81000000 0 0xfd010000 0  0xfd010000 0 0x10000	/* downstream I/O */
				  0x82000000 0 0xfb000000 0  0xfb000000 0 0xf00000>;	/* non-prefetchable memory */
			interrupt-map-mask = <0 0 0 0>;
			interrupt-map = <0 0 0 0 &icu_s ICU_GRP_NSR 24 IRQ_TYPE_LEVEL_HIGH>;
			interrupts = <ICU_GRP_NSR 24 IRQ_TYPE_LEVEL_HIGH>;

			num-lanes = <1>;
			clocks = <&cps_syscon0 1 11>;
			status = "disabled";
		};

		pcie@0x640000 {
			compatible = "marvell,armada8k-pcie", "snps,dw-pcie";
			reg = <0 0xf4640000 0 0x10000>, <0 0xfcf00000 0 0x80000>;	/* Last 64KB of mem space */
			reg-names = "ctrl", "config";
			#address-cells = <3>;
			#size-cells = <2>;
			#interrupt-cells = <1>;
			device_type = "pci";
			dma-coherent;

			bus-range = <0 0xff>;
			ranges = <0x81000000 0 0xfd020000 0  0xfd020000 0 0x10000	/* downstream I/O */
				  0x82000000 0 0xfc000000 0  0xfc000000 0 0xf00000>;	/* non-prefetchable memory */
			interrupt-map-mask = <0 0 0 0>;
			interrupt-map = <0 0 0 0 &icu_s ICU_GRP_NSR 23 IRQ_TYPE_LEVEL_HIGH>;
			interrupts = <ICU_GRP_NSR 23 IRQ_TYPE_LEVEL_HIGH>;

			num-lanes = <1>;
			clocks = <&cps_syscon0 1 12>;
			status = "disabled";
		};
	};

	cpn-110-slave {
		config-space {
			cp1_xor0: dma_xor@6a0000 { };
			cp1_xor1: dma_xor@6c0000 { };
		};
	};
};
